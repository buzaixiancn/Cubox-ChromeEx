# Chrome 扩展打包和分发指南

## 📦 快速打包

### 一键打包命令

```bash
pnpm zip
```

打包完成后，zip 文件会保存在 `dist-zip` 目录中，文件名格式为：
```
extension-YYYYMMDD-HHmmss.zip
```

例如：`extension-20251202-174130.zip`（大小约 1.8MB）

## 📤 分发方式

### 方式一：直接分发 zip 文件（推荐）

**步骤：**

1. **找到打包文件**
   - 文件位置：`dist-zip/extension-YYYYMMDD-HHmmss.zip`
   - 刚刚打包的文件：`dist-zip/extension-20251202-174130.zip`

2. **发送给使用者**
   - 可以通过邮件、网盘、聊天工具等方式发送
   - 文件大小约 1.8MB，传输方便

**使用者安装步骤：**

1. **下载并解压**
   - 下载 zip 文件
   - 解压到任意位置（例如桌面或下载文件夹）
   - 记住解压后的文件夹位置

2. **在 Chrome 中加载扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`（在地址栏输入）
   - 开启右上角的 **开发者模式** 开关
   - 点击 **加载已解压的扩展程序** 按钮
   - 选择刚才解压的文件夹（不是 zip 文件）
   - 扩展加载成功后，工具栏会显示扩展图标

3. **配置 API 密钥**
   - 点击浏览器工具栏中的扩展图标
   - 点击右上角的设置图标 ⚙️
   - 填写以下配置：
     - **OpenAI API Key**: 使用者的 OpenAI API 密钥
     - **API 端点**: 默认 `https://api.chatanywhere.tech`（可修改）
     - **模型名称**: 选择模型（gpt-3.5-turbo / gpt-4 / gpt-4-turbo / gpt-4o-mini）
     - **启用 Tavily API**: 开关控制是否使用 Tavily API
     - **Tavily API Key**: （如果启用 Tavily）使用者的 Tavily API 密钥
     - **Cubox API URL**: 使用者的 Cubox 收藏 API URL
   - 点击 **保存设置**

4. **开始使用**
   - 在要收藏的网页上点击扩展图标
   - 点击"分析网页内容"按钮
   - 预览并编辑 AI 生成的内容
   - 确认保存到 Cubox

### 方式二：发布到 Chrome Web Store（官方分发）

如果你想通过 Chrome 应用商店分发，需要：

1. **准备发布材料**
   - 扩展图标（128x128 像素）✅ 已有
   - 扩展截图（1280x800 或 640x400 像素）- 需要准备
   - 扩展描述（中文/英文）
   - 隐私政策 URL（如果收集用户数据）

2. **打包扩展**
   ```bash
   pnpm zip
   ```

3. **上传到 Chrome Web Store**
   - 访问 [Chrome Web Store Developer Dashboard](https://chrome.google.com/webstore/devconsole)
   - 创建新的扩展项目
   - 上传打包好的 zip 文件
   - 填写扩展信息、截图等
   - 提交审核（通常需要几天时间）

## 📋 打包前检查清单

在打包前，建议检查以下内容：

- [ ] 版本号是否正确（使用 `pnpm update-version <版本号>` 更新）
- [ ] 所有功能已测试通过
- [ ] 代码中没有硬编码的 API 密钥
- [ ] manifest.json 中的版本号已更新
- [ ] README.md 文档已更新

## 🎯 打包命令说明

```bash
# 清理并重新打包（推荐）
pnpm clean && pnpm zip

# 只打包（不清理，更快）
pnpm zip

# 查看打包后的文件
ls -lh dist-zip/

# 查看最新打包文件
ls -lt dist-zip/ | head -2
```

## ⚠️ 重要提示

1. **API 密钥安全**
   - 打包的扩展 **不包含** 任何 API 密钥
   - 每个使用者需要配置自己的 API 密钥
   - 提醒使用者不要分享自己的 API 密钥

2. **版本管理**
   - 每次发布前更新版本号
   - 使用语义化版本号：`主版本.次版本.修订版本`
   - 例如：`1.0.0`, `1.1.0`, `2.0.0`

3. **测试建议**
   - 打包后先自己安装测试
   - 确保所有功能正常工作
   - 检查是否有错误或警告

4. **文件大小**
   - 当前打包文件约 1.8MB
   - Chrome Web Store 限制单文件最大 100MB
   - 我们的扩展体积很小，不会有问题

## 🔄 更新版本

如果需要发布新版本：

1. **更新版本号**
   ```bash
   pnpm update-version 1.0.1  # 例如从 1.0.0 更新到 1.0.1
   ```

2. **重新打包**
   ```bash
   pnpm zip
   ```

3. **分发新版本**
   - 将新的 zip 文件发送给使用者
   - 使用者需要卸载旧版本，然后安装新版本

## 📝 使用说明模板

发送给使用者时，可以附带以下说明：

---

### Cubox 智能收藏 Chrome 扩展 - 安装说明

1. **下载扩展**
   - 已收到扩展 zip 文件

2. **解压文件**
   - 将 zip 文件解压到任意位置

3. **安装扩展**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启右上角的 **开发者模式**
   - 点击 **加载已解压的扩展程序**
   - 选择解压后的文件夹

4. **配置 API 密钥**
   - 点击扩展图标 → 设置 ⚙️
   - 填写你的 API 密钥：
     - OpenAI API Key（必需）
     - Tavily API Key（可选，如果启用 Tavily）
     - Cubox API URL（必需）
   - 点击保存设置

5. **开始使用**
   - 在要收藏的网页上点击扩展图标
   - 点击"分析网页内容"
   - 预览并编辑后保存到 Cubox

如有问题，请联系我或查看项目文档。

---

## 📍 当前打包文件

最新打包文件位置：
```
dist-zip/extension-20251202-174130.zip
```

文件大小：约 1.8 MB

可以直接将这个文件发送给其他人使用！
